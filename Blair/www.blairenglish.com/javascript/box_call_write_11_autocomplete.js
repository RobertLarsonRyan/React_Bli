// JavaScript Document



function showObject1(){
  yourAns[1]= document.getElementById("q1").value;
  
  
  yourAns[1] =yourAns[1].toUpperCase();
  
  if(yourAns[1] == ans[1]){
  document.getElementById("n1").style.visibility = "visible"; }
  else {
	  document.getElementById("n1").style.visibility = "hidden"; }
  
}
 function hideObject1() {  
 if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n1").style.visibility = "hidden";}
  else {
  document.all["n1"].style.visibility = "hidden";}  

 }
 function showObject2() {  
   
 yourAns[2]= document.getElementById("q2").value;
  
  
  yourAns[2] =yourAns[2].toUpperCase();
  
  if(yourAns[2] == ans[2]){
  document.getElementById("n2").style.visibility = "visible"; }
  else {
	  document.getElementById("n2").style.visibility = "hidden"; }   

 }
 function hideObject2() {  
  if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n2").style.visibility = "hidden";}
  else {
  document.all["n2"].style.visibility = "hidden";} 
  
 }
 function showObject3() {  
   
  yourAns[3]= document.getElementById("q3").value;
  
  
  yourAns[3] =yourAns[3].toUpperCase();
  
  if(yourAns[3] == ans[3]){
  document.getElementById("n3").style.visibility = "visible"; }
  else {
	  document.getElementById("n3").style.visibility = "hidden"; } 

 }
 function hideObject3() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n3").style.visibility = "hidden";}
  else {
  document.all["n3"].style.visibility = "hidden";}               
 }
 
 function showObject4() {  
   yourAns[4]= document.getElementById("q4").value;
  
  
  yourAns[4] =yourAns[4].toUpperCase();
  
  if(yourAns[4] == ans[4]){
  document.getElementById("n4").style.visibility = "visible"; }
  else {
	  document.getElementById("n4").style.visibility = "hidden"; }
  

 }
 function hideObject4() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n4").style.visibility = "hidden";}
  else {
  document.all["n4"].style.visibility = "hidden";}               
 }
 
 function showObject5() {  
  yourAns[5]= document.getElementById("q5").value;
  
  
  yourAns[5] =yourAns[5].toUpperCase();
  
  if(yourAns[5] == ans[5]){
  document.getElementById("n5").style.visibility = "visible"; }
  else {
	  document.getElementById("n5").style.visibility = "hidden"; } 
  

 }
 function hideObject5() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n5").style.visibility = "hidden";}
  else {
  document.all["n5"].style.visibility = "hidden";}               
 }
 
 function showObject6() {  
   yourAns[6]= document.getElementById("q6").value;
  
  
  yourAns[6] =yourAns[6].toUpperCase();
  
  if(yourAns[6] == ans[6]){
  document.getElementById("n6").style.visibility = "visible"; }
  else {
	  document.getElementById("n6").style.visibility = "hidden"; }
   

 }
 function hideObject6() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n6").style.visibility = "hidden";}
  else {
  document.all["n6"].style.visibility = "hidden";}               
 }
 
 function showObject7() {  
   yourAns[7]= document.getElementById("q7").value;
  
  
  yourAns[7] =yourAns[7].toUpperCase();
  
  if(yourAns[7] == ans[7]){
  document.getElementById("n7").style.visibility = "visible"; }
  else {
	  document.getElementById("n7").style.visibility = "hidden"; }
   

 }
 function hideObject7() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n7").style.visibility = "hidden";}
  else {
  document.all["n7"].style.visibility = "hidden";}             
 }
 
 function showObject8() {  
   yourAns[8]= document.getElementById("q8").value;
  
  
  yourAns[8] =yourAns[8].toUpperCase();
  
  if(yourAns[8] == ans[8]){
  document.getElementById("n8").style.visibility = "visible"; }
  else {
	  document.getElementById("n8").style.visibility = "hidden"; }
  




 }
 function hideObject8() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n8").style.visibility = "hidden";}
  else {
  document.all["n8"].style.visibility = "hidden";}              
 }
 
 function showObject9() {  
  yourAns[9]= document.getElementById("q9").value;
  
  
  yourAns[9] =yourAns[9].toUpperCase();
  
  if(yourAns[9] == ans[9]){
  document.getElementById("n9").style.visibility = "visible"; }
  else {
	  document.getElementById("n9").style.visibility = "hidden"; } 
   

 }
 function hideObject9() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n9").style.visibility = "hidden";}
  else {
  document.all["n9"].style.visibility = "hidden";}              
 }
 
 function showObject10() {  
   yourAns[10]= document.getElementById("q10").value;
  
  
  yourAns[10] =yourAns[10].toUpperCase();
  
  if(yourAns[10] == ans[10]){
  document.getElementById("n10").style.visibility = "visible"; }
  else {
	  document.getElementById("n10").style.visibility = "hidden"; }
  
 }
 function hideObject10() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n10").style.visibility = "hidden";}
  else {
  document.all["n10"].style.visibility = "hidden";}               
 }
 
 
  function showObject11() {  
   yourAns[11]= document.getElementById("q11").value;
  
  
  yourAns[11] =yourAns[11].toUpperCase();
  
  if(yourAns[11] == ans[11]){
  document.getElementById("n11").style.visibility = "visible"; }
  else {
	  document.getElementById("n11").style.visibility = "hidden"; }
  
 }
 function hideObject11() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n11").style.visibility = "hidden";}
  else {
  document.all["n11"].style.visibility = "hidden";}               
 }
 
  function showObject12() {  
   yourAns[12]= document.getElementById("q12").value;
  
  
  yourAns[12] =yourAns[12].toUpperCase();
  
  if(yourAns[12] == ans[12]){
  document.getElementById("n12").style.visibility = "visible"; }
  else {
	  document.getElementById("n12").style.visibility = "hidden"; }
  
 }
 function hideObject12() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n12").style.visibility = "hidden";}
  else {
  document.all["n12"].style.visibility = "hidden";}               
 }
 
function showObject13() {  
  yourAns[13]= document.getElementById("q13").value;
  
  
  yourAns[13] =yourAns[13].toUpperCase();
  
  if(yourAns[13] == ans[13]){
  document.getElementById("n13").style.visibility = "visible"; }
  else {
	  document.getElementById("n13").style.visibility = "hidden"; } 
   

 }
 function hideObject13() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n13").style.visibility = "hidden";}
  else {
  document.all["n13"].style.visibility = "hidden";}              
 }
 
function showObject14() {  
   yourAns[14]= document.getElementById("q14").value;
  
  
  yourAns[14] =yourAns[14].toUpperCase();
  
  if(yourAns[14] == ans[14]){
  document.getElementById("n14").style.visibility = "visible"; }
  else {
	  document.getElementById("n14").style.visibility = "hidden"; }
  
 }
 function hideObject14() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n14").style.visibility = "hidden";}
  else {
  document.all["n14"].style.visibility = "hidden";}               
 }
 
 function showObject15() {  
   yourAns[15]= document.getElementById("q15").value;
  
  
  yourAns[15] =yourAns[15].toUpperCase();
  
  if(yourAns[15] == ans[15]){
  document.getElementById("n15").style.visibility = "visible"; }
  else {
	  document.getElementById("n15").style.visibility = "hidden"; }
  
 }
 function hideObject15() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n15").style.visibility = "hidden";}
  else {
  document.all["n15"].style.visibility = "hidden";}               
 }
 
 function showObject16() {  
   yourAns[16]= document.getElementById("q16").value;
  
  
  yourAns[16] =yourAns[16].toUpperCase();
  
  if(yourAns[16] == ans[16]){
  document.getElementById("n16").style.visibility = "visible"; }
  else {
	  document.getElementById("n16").style.visibility = "hidden"; }
  
 }
 function hideObject16() {  
   if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n16").style.visibility = "hidden";}
  else {
  document.all["n16"].style.visibility = "hidden";}               
 }
 
 function showObject17(){
  yourAns[17]= document.getElementById("q17").value;
  
  
  yourAns[17] =yourAns[17].toUpperCase();
  
  if(yourAns[17] == ans[17]){
  document.getElementById("n17").style.visibility = "visible"; }
  else {
	  document.getElementById("n17").style.visibility = "hidden"; }
  
}
 function hideObject17() {  
 if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  document.getElementById("n17").style.visibility = "hidden";}
  else {
  document.all["n17"].style.visibility = "hidden";} 
 }
 
 
 
 
 
 var press = 0;

function Press(ans,yourAns) {
	
	press++;
	
	for(i=1;i<=yourAns.length;i++){
	
	if ((press >= 4) && (document.getElementById("q" + i).value.toUpperCase() != ans[i])) {
		
		var Dialog = confirm("Do you want to see the correct answers to the questions?") 
		
		if (Dialog) {
		
		for(i=1;i<=yourAns.length;i++){
   
         document.getElementById("q" + i).value = ans[i];
		 document.getElementById("q" + i).style.fontSize = "90%";
		 document.getElementById("autocomplete_q" + i).style.fontSize = "90%";
		 
		 var len = document.getElementById("q" + i).value.length;
         document.getElementById("q" + i).size = len + 2;
		 document.getElementById("img" + i).src = "../../../../images/icons/tick.gif";
	      document.getElementById("info" + i).src = "../../../../images/buttons/infobutton1.gif";
		  document.getElementById("info" + i).title = "Click here for extra info about this word/phrase";
	document.getElementById("audio" + i).src = "../../../../images/buttons/listenbutton1.gif";
	document.getElementById("audio" + i).title = "Click here to listen and practise the pronunciation of this word/phrase";
    document.getElementById("autocomplete_q" + i).value = ""; 
		}
		}else{
			return;
		}
	}
	
}
}

//function that checks if the speaking answer is correct
function checkIfCorrect(reply, correct, image){
	var speech = reply;
	var answer = correct;
	var tick_cross = image;
	 if (speech == answer) {
		 
		 document.getElementById(tick_cross).src = "../../../../images/icons/tick.gif";
	 }else{
	
	document.getElementById(tick_cross).src = "../../../../images/icons/cross.gif";
}
}


 function hideObjectAudio(number){
  var number = number;  
 if (navigator.userAgent.indexOf("Firefox")!=-1)
 {
  
  document.getElementById("p" + number).style.visibility = "hidden";}
  else {
  
  document.all["p" + number].style.visibility = "hidden";}  

 }

//function that changes the z-index of the info & audio boxes
 var boxOpen = 11;
function changeZindex(element) {
	
	boxOpen++;
	
	var boxID = element;
	var increase = document.getElementById(boxID).style.zIndex = boxOpen;

}

//function that sends an event to google analytics for audio box opening
function sendAudioEvent1() {
	
}
      
//function that prints the suggestion text in the underlying input box





function suggestWord(searchStr,id) {
			var typedWord = searchStr;
			var numberOfSuggestions = new Array;
			var count = 1;
			
			var testSuggestLength = document.getElementById("autocomplete_" + id).value;
			
		    
			
				
				
			 if (testSuggestLength.length == 1) {
				 document.getElementById("autocomplete_" + id).value = "";	
				 
			 }
			
			
			var testAlphabet = [ "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ]
			
			var checkAns = ans.concat(testAlphabet);
			
			if (searchStr.length != 0)
			{
			document.getElementById("autocomplete_" + id).style.color = "#ACACAC"; 
			for(var i = 1; i < checkAns.length; i++) {
				if(checkAns[i].substring(0,searchStr.length).toLowerCase() == searchStr.toLowerCase()) {
					
					numberOfSuggestions.push(checkAns[i]);
					count++; }
					
			        }
					
					if(count = checkAns.length && numberOfSuggestions.length == 1) {
						
						var typedStrg = searchStr;
						var suggestedWord = numberOfSuggestions[0];
						var typedStrgLength = typedStrg.length;
						var suggestedWordLength = suggestedWord.substring(typedStrgLength).toLowerCase();
						
						
						document.getElementById("autocomplete_" + id).value = typedWord + suggestedWordLength;
						document.getElementById("autocomplete_" + id).style.color = "#ACACAC"; 
						
						if (navigator.appName == "Microsoft Internet Explorer") {
				if(event.keyCode == 8 || event.keyCode == 46) {
					document.getElementById("autocomplete_" + id).style.color="#FFF";
				}
						}
					            
					
						}else{
							
						document.getElementById("autocomplete_" + id).value = "";	
						}
					
				
				
				}
		}


//function that deletes the suggestion text when text is selected/highlighted

function deleted(searchStr,id) {
	
	var deletedText = document.getElementById("autocomplete_" + id);
	
	deletedText.style.color="white";
	

}

function attachEvents() {
	if (!document.getElementById) return false; {
		
		
		for(i=1;i<=ans.length;i++){
			
		var events = document.getElementById("q" + i);
       
		
		
		events.oninput = function() {
			suggestWord(this.value,this.getAttribute('id')); 
		}
				
	
		events.onpropertychange = function() {
			suggestWord(this.value,this.getAttribute('id'));
			}	
			
	    events.onselect = function() {	
			deleted(this.value,this.getAttribute('id'));
			
	       }
		   
		   if (navigator.appName == "Microsoft Internet Explorer") {
			events.onkeydown = function() {
			suggestWord(this.value,this.getAttribute('id'));
			}
			
		   }
		   
        
		   
		   
			}
		   }
			
}


//function that populates all the quiz words/phrases into a box

var quizPara = document.getElementById("QuizWordsBox");

function populateWordBox()
 {
	
	for(i=1;i<=quizWords.length;i++){
	
	var word = document.getElementById('QuizWordsBox');
	var content = document.createTextNode(quizWords[i]);
	var space1 = document.createTextNode(" ");
	var spanadd = document.createElement("SPAN");
	var space = document.createElement("SPAN");
	spanadd.id = quizWords[i];
	spanadd.classList.add("quizWordsInBox");
	space.classList.add("space");
	space.appendChild(space1)
	spanadd.appendChild(content)
	word.appendChild(spanadd);
	word.appendChild(space);
	
	
	if (i === quizWords.length - 1) {
          
          break; 
	}
	}
}		




		
//function to record audio with the broswer for the pronun tests 

var recognition = new webkitSpeechRecognition();
recognition.lang = "en-GB";



var interimResult = "";
var correctAnswer = "";
var Qnumber = 0;


		function startRec(number,correct) {
		Qnumber = number;
			var correct = correct;
			correctAnswer = correct.toLowerCase();
		  recognition.start();
		
			        recognition.onerror = function (event) { alert("Connect a microphone to your computer to do this speaking test");
		}
			
		}
		

        recognition.onresult = function (event) {
               
            for (var i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    document.getElementById("speaking" + Qnumber).value = event.results[i][0].transcript;
					if (event.results[i][0].transcript == correctAnswer) {
						
					document.getElementById("audio_answer" + Qnumber).src = "../../../../../images/icons/tick.gif" 
					}else{
						
				document.getElementById("audio_answer" + Qnumber).src = "../../../../../images/icons/cross.gif";
}	
					
                } else {
                    alert("not working");
                }
            }
			
		
        }
		

//function to say if speech test works
function showObjectAudio(number){
  var number = number;
  
 
   sendAudioEvent1();
   if (!(window.webkitSpeechRecognition)) {
		                
					var para = document.createElement("span");
					para.style.color = "red";
					para.setAttribute("id", "newSpan" + number);
					var element = document.getElementById('table' + number);
					element.appendChild(para);
					var text = document.createTextNode();
					
					para.appendChild(text);
						
						
						document.getElementById("p" + number).style.visibility = "visible";
						document.getElementById("speaking" + number).style.backgroundColor = "black";
						 
						
						
  }else {
	  document.getElementById("p" + number).style.visibility = "visible";
	  
  
}
}